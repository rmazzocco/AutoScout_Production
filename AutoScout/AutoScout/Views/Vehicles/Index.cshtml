@model IEnumerable<AutoScout.Models.Vehicle>

@{
    ViewBag.Title = "Index";
    var companyName = ViewBag.CompanyName;
    var allMakes = ViewBag.AllMakes;
    var allModels = ViewBag.AllModels;
    var allExteriorColors = ViewBag.AllExteriorColors;
    var allYears = ViewBag.AllYears;
    var error = ViewBag.ErrorMessage != null ? ViewBag.ErrorMessage : null;

    var vehiclesMatchingSearch = Model.ToList();
}
<div class="row">
    <div class="padding col-md-12"></div>
</div>
<div class="row">
    
    <!--Filter Search Panel-->
    <div class="col-md-2">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Filter Search</h3>
            </div>
            <div class="panel-body">
                <label>Choose your search criteria to find a vehicle that meets your needs:</label>
                <form>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="makeCheckBox" data-bind="checked: useMakeField" />
                        <label for="selectMake">Make</label>
                        <select class="form-control select-small-text" id="selectMake" data-bind="visible: useMakeField,  value: Make">
                            @foreach (var make in allMakes)
                            {
                                <option>@make</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="modelCheckBox" data-bind="visible: useMakeField, checked: useModelField" />
                        <label for="selectModel" data-bind="visible: useMakeField">Model</label>
                        <select class="form-control select-small-text" id="selectModel" data-bind="visible: useModelField, optionsValue: 'description', optionsText: 'description', value: Model"></select>
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="yearCheckBox" data-bind="checked: useYearField" />
                        <label for="selectYear">Year</label>
                        <select class="form-control select-small-text" id="selectYear" data-bind="visible: useYearField, value: Year">
                            @foreach (var mod in allYears)
                            {
                                <option>@mod</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="styleCheckBox" data-bind="checked: useStyleField" />
                        <label for="selectStyle">Style</label>
                        <select class="form-control select-small-text" id="selectStyle" data-bind="visible: useStyleField, options: StyleChoices, optionsText: 'description', value: Style, optionsValue: 'description'"></select>
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="transmissionCheckBox" data-bind="checked: useTransmissionField" />
                        <label for="selectTransmission">Transmission</label>
                        <select class="form-control select-small-text" id="selectTransmission" data-bind="visible: useTransmissionField, options: TransmissionChoices, optionsText: 'description', value: Transmission, optionsValue: 'description'"></select>
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="mileageCheckBox" data-bind="checked: useMileageField" />
                        <label for="selectMileage">Mileage</label>
                        <select class="form-control select-small-text" id="selectMileage" data-bind="visible: useMileageField, options: MileageChoices, optionsText: 'description', value: Mileage, optionsValue: 'description'"></select>
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="exteriorColorCheckBox" data-bind="checked: useExteriorColorField" />
                        <label for="selectExteriorColor">ExteriorColor</label>
                        <select class="form-control select-small-text" id="selectExteriorColor" data-bind="visible: useExteriorColorField, value: ExteriorColor">
                            @foreach (var color in allExteriorColors)
                            {
                                <option>@color</option>
                            }
                        </select>
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="priceCheckBox" data-bind="checked: usePriceField" />
                        <label for="selectPrice">Price</label>
                        <input class="form-control select-small-text" placeholder="Minimum" type="text" data-bind="visible: usePriceField, value: MinimumPrice" />
                        <br />
                        <input class="form-control select-small-text" placeholder="Maximum" type="text" data-bind="visible: usePriceField, value: MaximumPrice" />
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="conditionCheckBox" data-bind="checked: useConditionField, value: Condition" />
                        <label for="selectCondition">Condition</label>
                        <select class="form-control select-small-text" id="selectCondition" data-bind="visible: useConditionField, options: ConditionChoices, optionsText: 'description', value: Condition, optionsValue: 'description'"></select>
                    </div>
                    <div class="form-group">
                        <input class="pad-right-10" type="checkbox" name="cylinderCheckBox" data-bind="checked: useCylinderField, value: CylinderCount" />
                        <label for="selectCondition">Engine Cylinders</label>
                        <select class="form-control select-small-text" id="selectCondition" data-bind="visible: useCylinderField, options: CylinderChoices, optionsText: 'description', value: CylinderCount, optionsValue: 'description'"></select>
                    </div>
                </form>
            </div>
            <div id="testSearchService">
                <!--<p data-bind="text: Make"></p>-->
                <button data-bind="click: SendSearch">Search Inventory</button>
            </div>
        </div>
    </div>
    <!-- List of Search Results items -->
    <div class="col-md-10">
        <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title">Results</h3>
            </div>
            <div class="panel-body">
                @*@foreach (var item in vehiclesMatchingSearch)
                {
                    @Html.Partial("ShortcutListItem", item)
                }
                @if (error != null)
                {
                    <div class="alert alert-danger" role="alert"><p>@ViewBag.ErrorMessage</p></div>
                }
                *@
                <!-- ko foreach: Vehicles() -->
                    <div class="col-md-3">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h5><span data-bind="text: Year"> </span><span data-bind="text: Make"></span> <span data-bind="text: Model"></span></h5>
                            </div>
                            <div class="panel-body">
                                <div style="position:relative; height: 150px">
                                    <img id="previewImage" data-bind="attr: { src : PreviewImage }" class="img-rounded img-responsive img-thumbnail center-block" style="max-height: 150px" />
                                </div>
                                <h5 class="price"><span data-bind="text: Price"></span></h5>
                            </div>
                        </div>
                    </div>
                <!-- /ko -->    
                
                </div>
            </div>
        </div>


    </div>


    @Scripts.Render("~/bundles/filtersearch")

